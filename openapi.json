{
  "openapi": "3.0.1",
  "info": {
    "title": "ShipBob Orders API",
    "description": "ShipBob Orders API",
    "version": "v1"
  },
  "paths": {
    "/api/order/estimate": {
      "post": {
        "tags": [
          "Orders"
        ],
        "summary": "Estimate Fulfillment Cost For Order",
        "description": "This endpoint will provide, where possible, an estimate of pricing and fulfillment center assignment of a potential standard (direct to consumer) order. \r\nKeep in mind that there are ways for the merchant to change FC assignment or product configuration after order creation that could invalidate this estimate. \r\nEstimates cannot be returned for items that are unknown, out of stock, or too large for fulfillment using standard box sizes. \r\nAdditional services such as high-pick fees, shipping insurance, auto-splitting or auto-adding items to orders, and signature required are not included in this estimate.",
        "parameters": [
          {
            "name": "shipbob_channel_id",
            "in": "header",
            "description": "Channel Id for Operation",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "x_correlation_id",
            "in": "header",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "description": "",
          "content": {
            "application/json-patch+json": {
              "schema": {
                "$ref": "#/components/schemas/ShipBob.Orders.Presentation.Models.EstimateFulfillmentRequestModel"
              }
            },
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ShipBob.Orders.Presentation.Models.EstimateFulfillmentRequestModel"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ShipBob.Orders.Presentation.Models.EstimateFulfillmentRequestModel"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ShipBob.Orders.Presentation.Models.EstimateFulfillmentRequestModel"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShipBob.Orders.Presentation.ViewModels.EstimateViewModel"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Client Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "No access right at this time"
          },
          "403": {
            "description": "No access"
          }
        },
        "security": [
          {
            "oauth2": [
              "orders_read"
            ]
          }
        ]
      }
    },
  },
  "components": {
	"schemas": {
		"ShipBob.Orders.Presentation.Models.EstimateFulfillmentRequestModel": {
			"required": [
			  "address",
			  "products"
			],
			"type": "object",
			"properties": {
			  "shipping_methods": {
				"type": "array",
				"items": {
				  "type": "string"
				},
				"description": "Array of strings specifying shipping methods for which to fetch estimates.\r\n\r\nIf this field is omitted we will return estimates for all shipping methods defined in ShipBob",
				"nullable": true
			  },
			  "address": {
				"$ref": "#/components/schemas/ShipBob.Orders.Presentation.ViewModels.EstimationAddressViewModel"
			  },
			  "products": {
				"type": "array",
				"items": {
				  "$ref": "#/components/schemas/ShipBob.Orders.Presentation.Models.EstimateProductInfoModel"
				},
				"description": "Products to be included in the order. Each product must include one of reference_id or id"
			  }
			},
			"additionalProperties": false
		  },
		        "ShipBob.Orders.Presentation.ViewModels.EstimationAddressViewModel": {
        "required": [
          "country"
        ],
        "type": "object",
        "properties": {
          "address1": {
            "type": "string",
            "description": "First line of the address",
            "nullable": true,
            "example": "100 Nowhere Blvd"
          },
          "address2": {
            "type": "string",
            "description": "Second line of the address",
            "nullable": true,
            "example": "Suite 100"
          },
          "company_name": {
            "type": "string",
            "description": "Name of the company receiving the shipment",
            "nullable": true,
            "example": "Wayne Enterprises"
          },
          "city": {
            "type": "string",
            "description": "The city",
            "nullable": true,
            "example": "Gotham City"
          },
          "state": {
            "type": "string",
            "description": "The state or province",
            "nullable": true,
            "example": "NJ"
          },
          "country": {
            "minLength": 1,
            "type": "string",
            "description": "The country (Must be ISO Alpha-2 for estimates)",
            "example": "US"
          },
          "zip_code": {
            "type": "string",
            "description": "The zip code or postal code",
            "format": "postal-code",
            "nullable": true,
            "example": "07093"
          }
        },
        "additionalProperties": false
      },
		"ShipBob.Orders.Presentation.ViewModels.EstimateViewModel": {
        "type": "object",
        "properties": {
          "estimates": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ShipBob.Orders.Presentation.ViewModels.EstimateDetailViewModel"
            },
            "description": "Array of estimates for each shipping method",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
	  "ShipBob.Orders.Presentation.ViewModels.EstimateDetailViewModel": {
        "type": "object",
        "properties": {
          "fulfillment_center": {
            "$ref": "#/components/schemas/ShipBob.Orders.Presentation.ViewModels.FulfillmentCenterViewModel"
          },
          "shipping_method": {
            "type": "string",
            "description": "Provided shipping method. Maps to ship option in ShipBob.",
            "nullable": true
          },
          "estimated_price": {
            "type": "number",
            "description": "Estimated price in dollars for the provided shipping method",
            "format": "double"
          },
          "estimated_currency_code": {
            "type": "string",
            "description": "Estimated local currency code",
            "nullable": true
          },
          "total_weight_oz": {
            "type": "number",
            "description": "Total weight of items in cart including packaging.",
            "format": "double"
          }
        },
        "additionalProperties": false
      },
	  "ShipBob.Orders.Presentation.ViewModels.FulfillmentCenterViewModel": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "Id of the fulfillment center",
            "format": "int32"
          },
          "name": {
            "type": "string",
            "description": "Name of the fulfillment center",
            "nullable": true,
            "example": "Cicero (IL)"
          }
        },
        "additionalProperties": false,
        "description": "Information about a fulfillment center that a shipment can belong to"
      },
	}
    "securitySchemes": {
      "oauth2": {
        "type": "oauth2",
        "flows": {
          "authorizationCode": {
            "authorizationUrl": "https://auth.shipbob.com/connect/integrate",
            "tokenUrl": "https://auth.shipbob.com/connect/token",
            "scopes": {
              "orders_read": "Access read operations",
              "orders_write": "Access write operations"
            }
          }
        }
      }
    }
  }
}